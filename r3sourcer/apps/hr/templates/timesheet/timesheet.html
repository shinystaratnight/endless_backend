<!DOCTYPE html>
<html lang="en">
{% load static %}
{% load i18n l10n static %}
{% localize on %}
<head>
	<meta charset="UTF-8">
	<title>Timesheet</title>

	<style>
		@page {
            size: A4 landscape;
            /*margin: 4cm 2.2cm 1.8cm;*/
            /*margin: 2cm 1.1cm 0.9cm;*/
            margin: 1cm;
        }
		body {
			color: #333;
			font-size: 16px;
			line-height: 1.2;

			padding: 5px;
		}

		.logo {
			margin-bottom: 40px;
		}

		.provided-logo {
			float: right;

			font-size: 14px;
			line-height: 20px;

			color: rgba(51, 51, 51, .8);
		}

		.provided-logo img {
			margin-left: 10px;
		}

		h4 {
			margin-top: 0;

			font-weight: 600;
		}

		table {
			width: 100%;

			border-collapse: collapse;
			border: 1px solid #ddd;
		}

		caption {
			font-size: 20px;
			font-weight: 600;

			margin-bottom: 10px;
		}

		thead th {
			background-color: #eee;
		}

		tbody td:first-child {
			background-color: #eee;
		}

		th, td {
			font-size: 15px;
			padding: 5px 2px;
			text-align: center;
			border: 1px solid #cdcdcd;
		}
		.provided-logo {
			right: -20px;
		}
	</style>
</head>
<body>
{% for group, t_s in timesheets %}
	<header>
		<div class="logo">
			<div style="display: inline-block; width: 33%; height: 50px; vertical-align: top;">
				<img src="{{ domain }}{{ group.get_closest_company.company_settings.logo.url }}" alt="Logo" style="height: 50px;">
			</div>
			<h4 style="display: inline-block; width: 33%; text-align: center; height: 50px; line-height: 50px">
				Timesheet
			</h4>
			<div style="display: inline-block; width: 33%; height: 50px; vertical-align: top;">
				 <span class="provided-logo"><span style="height: 50px; line-height: 50px;">Provided by</span> <img class="provided-logo" src="{% absstatic 'new-software.svg' %}" alt="R3sourcer" style="height: 50px;"></span>
			</div>
		</div>
	</header>
	<body>
		<h4 class="title">{{ group.master_company }}</h4>
		<table>
			<caption>{{ group }} {% if group.end_date  %} ( expires {{ group.end_date|date:'d/m/Y' }} ) {% else %}{% endif %}</caption>
			<thead>
				<tr>
					<th>Candidate</th>
					<th>Position</th>
					<th>Date</th>
					<th>Start</th>
					<th>End</th>
					<th>Break</th>
					<th>Base hrs</th>
					<th>x1.5</th>
					<th>x2</th>
					<th>Total</th>
					<th>Travel</th>
					<th>Meal</th>
					<th>Electronic timesheet confirmed by supervisor</th>
					<th>Electronic timesheet confirmed by candidate</th>
				</tr>
			</thead>
			<tbody>

			{% for timesheet in t_s %}
			{{ timesheet.coeffs_hours }}
				<tr>
					<td>{{ timesheet.candidate_contact }}</td>
					<td>{{ timesheet.job_offer.job.position }}</td>
					<td>{{ timesheet.shift_started_at|date:'d/m/Y' }}</td>
					<td>{{ timesheet.shift_started_at|time:'h:i A' }}</td>
					<td>{{ timesheet.shift_ended_at|time:'h:i A' }}</td>
					<td>{{ timesheet.break_delta|get_hours }}</td>
					<td>{{ timesheet.base|get_hours }}</td>
					<td>{{ timesheet.c_1_5x|get_hours }}</td>
					<td>{{ timesheet.c_2x|get_hours }}</td>
					<td>{{ timesheet.base|add:timesheet.c_1_5x|add:timesheet.c_2x|get_hours }}</td>
					<td>{{ timesheet.travel }}</td>
					<td>{{ timesheet.meal }}</td>
					<td>{{ timesheet.supervisor }}<br/>{{ timesheet.supervisor.contact.phone_mobile }}<br/>{{timesheet.supervisor_approved_at|date:'d/m/Y h:i A' }}
					</td>
					<td>{{ timesheet.candidate_contact.contact.phone_mobile }}<br/>{{timesheet.candidate_submitted_at|date:'d/m/Y h:i A' }}
					</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
	</body>
	{% if not forloop.last %}
		<p style="page-break-before: always" ></p>
	{% endif %}
{% endfor %}
</body>
{% endlocalize %}
</html>